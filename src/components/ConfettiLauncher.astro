<div data-trigger-confettis>
	<slot />
</div>

<div class="wrapper">
	<canvas id="confettis"></canvas>
</div>

<script
	is:inline
	src="https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/dist/index.min.js"
></script>

<style>
	.wrapper {
		top: 0;
		position: fixed;
		width: 100%;
		height: 100%;
		pointer-events: none;
	}
</style>

<script>
	// Wait until the DOM content is fully loaded
	document.addEventListener('DOMContentLoaded', () => {
		const confettiElement = document.querySelector('#confettis');
		const triggerConfettis = document.querySelector('[data-trigger-confettis]');

		if (confettiElement && triggerConfettis) {
			// Add click event listener
			triggerConfettis.addEventListener('click', popIt);

			function popIt() {
				const confettiSettings = {
					target: confettiElement,
					start_from_edge: true,
				};
				// Initialize and render confetti
				const confetti = new ConfettiGenerator(confettiSettings);
				confetti.render();
			}
		} else {
			console.error('Confetti element or trigger element not found');
		}

		console.log('Pop ðŸŽ‰!');
	});
</script>
